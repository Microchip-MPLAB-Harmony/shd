name: samc21-pim-mc-mchv3
config: sam_c21_pim_mc_mchv3.py
documentation: https://www.microchip.com/en-us/development-tool/MA320206
processor:
  name: ATSAMC21J18A
  architecture: CORTEX-M0PLUS
  family: SAMC
  series: SAMC21

interfaces:
  - name: Digital interface
    description: Button and Led configurations
    options:
      - name: User Led 1
        description: User Led 1 - Active High
        pinctrl:
          gpio:
            pinId: PB12
            name: LED1
            function: GPIO
            direction: out
            latch: low
      - name: User Led 2
        description: User Led 2 - Active High
        pinctrl:
          gpio:
            pinId: PB13
            name: LED2
            function: GPIO
            direction: out
            latch: low
      - name: User Button 1
        description: User Button 1 - Active High
        pinctrl:
          gpio:
            pinId: PA11
            name: BUTTON1
            function: GPIO
            direction: in
            pull up: True

  - name: Analog interface
    description: Analog peripheral configurations
    options:
      - name: IA
        description: Phase current signal
        dependencies: [[pmsm_foc, adc0]]
        pinctrl:
          adc plus:
            pinId: PB08
            name: IA
            function: ADC0_AIN2
      - name: IB
        description: Phase current signal
        dependencies: [[pmsm_foc, adc1]]
        pinctrl:
          adc plus:
            pinId: PB09
            name: IB
            function: ADC1_AIN5
      - name: VPOT
        description: Potentiometer signal
        dependencies: [[pmsm_foc, adc1]]
        pinctrl:
          adc plus:
            pinId: PB00
            name: VPOT
            function: ADC1_AIN0
      - name: VDC
        description: DC bus voltage
        dependencies: [[pmsm_foc, adc0]]
        pinctrl:
          adc plus:
            pinId: PA09
            name: VDC
            function: ADC0_AIN9

  - name: Position Decoder interface
    description: Position decoder configurations
    options:
      - name: QEA
        description: QEA signal
        pinctrl:
          qea:
            pinId: PB11
            name: QEA
            function: EIC_EXTINT11
      - name: QEB
        description: QEB signal
        pinctrl:
          qea:
            pinId: PB04
            name: QEB
            function: EIC_EXTINT4

  - name: Inverter interface
    description: Three-Phase Inverter configurations
    options:
      - name: Phase A
        description: Phase A Inverter signals
        dependencies: [[pmsm_foc, tcc0]]
        pinctrl:
          low:
            pinId: PA14
            name: PWM1L1
            function: TCC0_WO4
          high:
            pinId: PB30
            name: PWM1H1
            function: TCC0_WO0
      - name: Phase B
        description: Phase B Inverter signals
        dependencies: [[pmsm_foc, tcc0]]
        pinctrl:
          low:
            pinId: PA15
            name: PWM1L2
            function: TCC0_WO5
          high:
            pinId: PA05
            name: PWM1H2
            function: TCC0_WO1
      - name: Phase C
        description: Phase C Inverter signals
        dependencies: [[pmsm_foc, tcc0]]
        pinctrl:
          low:
            pinId: PA16
            name: PWM1L3
            function: TCC0_WO6
          high:
            pinId: PA10
            name: PWM1H3
            function: TCC0_WO2
      - name: Fault
        description: DC bus Current Fault
        pinctrl:
          gpio:
            pinId: PA18
            name: FAULT_PWM
            function: EIC_EXTINT2

  - name: Communication interface
    description: Communication Port options
    options:
      - name: USART X2CScope interface
        description: USART X2CScope interface
        dependencies: [[X2CScope, sercom3]]
        pinctrl:
          tx:
            pinId: PA22
            name: UART_TX
            function: SERCOM3_PAD0
          rx:
            pinId: PA23
            name: UART_RX
            function: SERCOM3_PAD1
